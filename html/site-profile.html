<!DOCTYPE html>
<html>
  <head>
    <title>Impruw Dash Layout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/flat-ui.css" rel="stylesheet" media="screen">
    <link href="css/main.min.css" rel="stylesheet" media="screen">
	<link href="../css/dashboard.css" rel="stylesheet" media="screen">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="aj-imp-container container">
		<div class="row">
			<div class="aj-imp-left col-md-3 col-sm-4">
				<div class="aj-imp-dash-logo">
					<a href="#"><img src="images/impruw-logo.png" title="Impruw" alt="Impruw" class="img-responsive" /></a>
				</div>
				<nav class="aj-imp-dash-nav">
					<ul id="aj-imp-dash-menu">
						<li class="aj-imp-nav-create">
							<span class="icon"></span>
							<span class="arrow"></span>
							<a href="#">Create Site</a>
						</li>
						<li class="aj-imp-nav-booking">
							<span class="icon"></span>
							<span class="arrow"></span>
							<a href="#">Booking</a>
						</li>
						<li class="aj-imp-nav-reports">
							<span class="icon"></span>
							<span class="arrow"></span>
							<a href="#">Reports</a>
						</li>
						<li class="aj-imp-nav-marketing">
							<span class="icon"></span>
							<span class="arrow"></span>
							<a href="#">Marketing</a>
						</li>
						<li class="aj-imp-nav-inventory">
							<span class="icon"></span>
							<span class="arrow"></span>
							<a href="#">Room Inventory</a>
						</li>
						<li class="aj-imp-nav-profile active">
							<span class="icon"></span>
							<span class="arrow"></span>
							<a href="#">Profile &amp; Billing</a>
						</li>
						<li class="aj-imp-nav-support">
							<span class="icon"></span>
							<span class="arrow"></span>
							<a href="#">Support</a>
						</li>
					</ul>
				</nav>
			</div>
			<div class="aj-imp-right col-md-9 col-sm-8">
				<header class="aj-imp-dash-header row">
					<div class="aj-imp-dash-title col-sm-8">
						<h2 class="aj-imp-page-head">Site Profile</h2>
					</div>
					<div class="aj-imp-dash-actions col-sm-4">
						<a href="#" class="btn btn-embossed btn-wide"><span class="glyphicon glyphicon-cog"></span> Settings</a>
					</div>
				</header>
				<div class="row scroll-indicator-container">
					<div class="aj-imp-dash-content col-md-12">
						<h4 class="aj-imp-sub-head scroll-ref">General <small>Lorem ipsum dolor sit amet, consectetur adipiscing</small></h4>
						<form class="form-horizontal clearfix">
							
							<label for="inputEmail3" class="col-sm-2 control-label">Site Name</label>
							<div class="col-sm-10">
								<div class="form-group">
									<div class="input-group">
										<input type="email" class="form-control" id="inputEmail3" placeholder="Site Name">
										<span class="input-group-addon">.impruw.com</span>
									</div>
								</div>
							</div>
							
							<label for="inputFile3" class="col-sm-2 control-label">Business Logo</label>
							<div class="col-sm-10">
								<div class="form-group">
									<div class="fileinput fileinput-new" data-provides="fileinput">
									  <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 300px; height: 100px;"></div>
									  <div>
										<span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><input type="file" name="inputFile3"></span>
										<a href="#" class="btn btn-danger fileinput-exists" data-dismiss="fileinput">Remove</a>
									  </div>
									</div>
								</div>
							</div>
							
							<label for="inputFile4" class="col-sm-2 control-label">Fav Icon</label>
							<div class="col-sm-10">
								<div class="form-group">
									<div class="fileinput fileinput-new" data-provides="fileinput">
									  <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 300px; height: 100px;"></div>
									  <div>
										<span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><input type="file" name="inputFile4"></span>
										<a href="#" class="btn btn-danger fileinput-exists" data-dismiss="fileinput">Remove</a>
									  </div>
									</div>
								</div>
							</div>
							
							<div class="col-sm-offset-2 col-sm-10">
								<div class="form-group">
									<button type="submit" class="btn btn-wide aj-imp-submit">Save</button>
								</div>
							</div>
						</form>
						<h6 class="aj-imp-sub-head-thin scroll-ref">Business Details <small>Lorem ipsum dolor sit amet, consectetur adipiscing</small></h6>
						<form class="form-horizontal clearfix">
							<legend>Mailing Address</legend>
							
							<label for="inputAddress1" class="col-sm-2 control-label">Street</label>
							<div class="col-sm-10">
								<div class="form-group">
									<input type="text" class="form-control" id="inputAddress1" placeholder="Street">
								</div>
							</div>
							
							<label for="inputAddress2" class="col-sm-2 control-label">Postal Code</label>
							<div class="col-sm-4">
								<div class="form-group">
									<input type="text" class="form-control" id="inputAddress2" data-mask="999-999" placeholder="Postal Code">
								</div>
							</div>
							
							<label for="inputAddress3" class="col-sm-2 control-label">City / Town</label>
							<div class="col-sm-4">
								<div class="form-group">
									<input type="text" class="form-control" id="inputAddress2" placeholder="City / Town">
								</div>
							</div>
							
							<label for="inputAddress4" class="col-sm-2 control-label">Country</label>
							<div class="col-sm-10">
								<div class="form-group">
									<select>
										<option value="0">Norway</option>
										<option value="1">Sweden</option>
										<option value="2">Denmark</option>
									</select>
								</div>
							</div>
							
							<label for="inputEmail1" class="col-sm-2 control-label">Email</label>
							<div class="col-sm-6">
								<div class="form-group">
									<input type="email" class="form-control" id="inputEmail1" placeholder="Email">
								</div>
							</div>
							
							<div class="col-sm-4">
								<a href="#" class="btn"><span class="glyphicon glyphicon-plus"></span> Add Another</a>
							</div>
							
							<div class="clearfix"></div>
							
							<label for="inputPhone1" class="col-sm-2 control-label">Phone</label>
							<div class="col-sm-6">
								<div class="form-group">
									<input type="text" class="form-control" id="inputEmail1" data-mask="99-999-999" placeholder="Phone">
								</div>
							</div>
							
							<div class="col-sm-4">
								<a href="#" class="btn"><span class="glyphicon glyphicon-plus"></span> Add Another</a>
							</div>
							
							<div class="clearfix"></div>
							
							<div class="col-sm-offset-2 col-sm-10">
								<div class="form-group">
									<button type="submit" class="btn btn-wide aj-imp-submit">Save</button>
								</div>
							</div>
						
						</form>
						
						<h6 class="aj-imp-sub-head-thin scroll-ref">Social Settings <small>Lorem ipsum dolor sit amet, consectetur adipiscing</small></h6>
						<form class="form-horizontal clearfix">
						
							<label for="inputSocial1" class="col-sm-2 control-label">Facebook</label>
							<div class="col-sm-10">
								<div class="form-group">
									<div class="input-group">
										<span class="input-group-addon">www.facebook.com/</span>
										<input type="text" class="form-control" id="inputSocial1" placeholder="Facebook">
									</div>
								</div>
							</div>
							
							<label for="inputSocial2" class="col-sm-2 control-label">Twitter</label>
							<div class="col-sm-10">
								<div class="form-group">
									<div class="input-group">
										<span class="input-group-addon">www.twitter.com/</span>
										<input type="text" class="form-control" id="inputSocial2" placeholder="Twitter">
									</div>
								</div>
							</div>
							
							<div class="col-sm-offset-2 col-sm-10">
								<div class="form-group">
									<button type="submit" class="btn btn-wide aj-imp-submit">Save</button>
								</div>
							</div>
							
						</form>
						
						<h4 class="aj-imp-sub-head scroll-ref">SEO <small>Lorem ipsum dolor sit amet, consectetur adipiscing</small></h4>
						<form class="form-horizontal clearfix">
							
							<label for="inputSEO1" class="col-sm-2 control-label">Site Description</label>
							<div class="col-sm-10">
								<div class="form-group">
									<textarea class="form-control" rows="3" name="inputSEO1" placeholder="Site Description"></textarea>
								</div>
							</div>
							
							<label for="inputSEO2" class="col-sm-2 control-label">Meta Keywords</label>
							<div class="col-sm-10">
								<div class="form-group">
									<textarea class="form-control" rows="3" name="inputSEO2" placeholder="Meta Keywords"></textarea>
									<span class="help-block">Separate each keyword with a comma.</span>
								</div>
							</div>
							
							<label for="inputSEO3" class="col-sm-2 control-label">Footer Code</label>
							<div class="col-sm-10">
								<div class="form-group">
									<textarea class="form-control" rows="3" name="inputSEO3" placeholder="Footer Code"></textarea>
									<span class="help-block">ex. Google Analytics tracking code.</span>
								</div>
							</div>
							
							<label for="inputSEO4" class="col-sm-2 control-label">Header Code</label>
							<div class="col-sm-10">
								<div class="form-group">
									<textarea class="form-control" rows="3" name="inputSEO4" placeholder="Header Code"></textarea>
									<span class="help-block">ex. Google Webmaster tools verification code.</span>
								</div>
							</div>
							
							<div class="col-sm-offset-2 col-sm-10">
								<div class="form-group">
									<label for="checkbox2" class="checkbox checked">
										<input type="checkbox" data-toggle="checkbox" checked="checked" id="checkbox2" value="">
										Hide site from Search Engines
									</label>
								</div>
							</div>
							
							<div class="col-sm-offset-2 col-sm-10">
								<div class="form-group">
									<button type="submit" class="btn btn-wide aj-imp-submit">Save</button>
								</div>
							</div>
							
						</form>
						
						<h4 class="aj-imp-sub-head scroll-ref">Editors <small>Editors are other people you've allowed to edit this site.</small></h4>
						<table class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<th>Name</th>
									<th>Role</th>
									<th>Last Login</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody data-link="row" class="rowlink">
								<tr>
									<td>
										<a href="#rowlinkModal" data-toggle="modal">admin@impruw.com</a>
									</td>
									<td>
										Admin
									</td>
									<td>
										23/11/2013 @ 13:09
									</td>
									<td class="rowlink-skip">
										<a href="#">Delete</a>
									</td>
								</tr>
								<tr>
									<td>
										<a href="#rowlinkModal" data-toggle="modal">user@impruw.com</a>
									</td>
									<td>
										Author
									</td>
									<td>
										23/11/2013 @ 13:09
									</td>
									<td class="rowlink-skip">
										<a href="#">Delete</a>
									</td>
								</tr>
								<tr>
									<td>
										<a href="#rowlinkModal" data-toggle="modal">user@impruw.com</a>
									</td>
									<td>
										Author
									</td>
									<td>
										23/11/2013 @ 13:09
									</td>
									<td class="rowlink-skip">
										<a href="#">Delete</a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Add Editor Modal -->
	<div class="modal wide-modal" id="rowlinkModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close fui-cross" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">Add Editor</h4>
				</div>

				<div class="modal-body">
					<form class="form-horizontal clearfix">
						
						<label for="inputAddEmail1" class="col-sm-2 control-label">Email</label>
						<div class="col-sm-6">
							<div class="form-group">
								<input type="email" class="form-control" id="inputAddEmail1" placeholder="Email">
							</div>
						</div>
						
						<div class="col-sm-4">
							<a href="#" class="btn"><span class="glyphicon glyphicon-plus"></span> Add Another</a>
						</div>
						<div class="clearfix"></div>
						
						<label for="inputRole" class="col-sm-2 control-label">Role</label>
						<div class="col-sm-10">
							<div class="form-group">
								<select>
									<option value="0">Admin</option>
									<option value="1">Author</option>
									<option value="2">Editor</option>
								</select>
							</div>
						</div>
						
						<label for="inputAdd" class="col-sm-2 control-label">Enter Message in Email Invitation</label>
						<div class="col-sm-10">
							<div class="form-group">
								<textarea class="form-control" rows="3" name="inputAdd" placeholder="Header Code"></textarea>
								<span class="help-block">ex. Google Webmaster tools verification code.</span>
							</div>
						</div>
						
					</form>
				</div>

				<div class="modal-footer">
					<button class="btn btn-default aj-imp-modal-save">Add Editor</button>
				</div>
			</div>
		</div>  
	</div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-2.0.3.min.js"></script>
    <script src="js/underscore.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/flatui-checkbox.js"></script>
    <script src="js/bootstrap-select.js"></script>
    <script src="js/flatui-radio.js"></script>
    <script src="js/bootstrap-file-upload.min.js"></script>
    <script src="js/bootstrap-input-mask.min.js"></script>
    <script src="js/bootstrap-row-link.min.js"></script>
	<script>
		jQuery("select").selectpicker();
	</script>
	<script>
		
		// Global var to cache info about indicators for easy access. 
		var indicators = [];

		jQuery(window).load(function(){

		  //
		  //	CREATE THE INDICATORS AND ADD TO PAGE
		  //

		  var rawIndicators = "";
		  var $articles = jQuery(".scroll-indicator-container");
		  // Create a bubble for each article
		  $articles.each(function(i) {
			var iInverse = $articles.length - i - 1;
			// Top margin is a function of the nodes before it, bottom is proportional to those after. determines stacking at top / bottom static positions
			var margins = 'margin: ' + (i+0.5) + 'em 0 ' + (iInverse+0.5) + 'em 0;'; 
			rawIndicators +=  '<a class="indicator indicator--upcoming" style="' + margins + '" href="#' + this.id + '"><span class="indicator-tooltip">' + $(this).find("h1").text() + '</span></a>';
		  });
		  jQuery("body").append(rawIndicators);

		  // Utility function to calculate the proper top coordinate for a bubble when it's on the move (position: absolute)
		  var getNodeTopPos = function(indicator, target) {
			var indMargTop = parseInt(indicator.css("margin-top").replace("px", ""));
			var targCenter =  target.outerHeight(false)/2;
			var indCenter = indicator.outerHeight(false)/2;
			return target.offset().top - indMargTop + targCenter - indCenter;
		  }


		  // 
		  // INITIAL SET UP OF INDICATOR OBJECT
		  //

		  var calcIndicatorInfo = function(){

			indicators = []
			jQuery(".indicator").each(function(){
			  
			  var o = {
				$indicator: jQuery(this),
				$target: jQuery( jQuery(this).attr("href") ),
				$targetTitle: jQuery( jQuery(this).attr("href") + " .scroll-ref" )
			  };

			  // When it's abs positioned (on the move), this is the top pos
			  o.absPos = getNodeTopPos(o.$indicator, o.$targetTitle); 

			  // When it's abs positioned, at this scroll pos we should make the indicator fixed to the bottom
			  o.absBottomStop = window.innerHeight - (o.absPos + o.$indicator.outerHeight(true));

			  // Top / bottom stops for being 'viewable'
			  o.viewableTopStop = o.$target.offset().top - window.innerHeight;
			  o.viewableBottomStop = o.$target.offset().top + o.$target.outerHeight();
			  indicators[indicators.length] = o;
			  
			});
		  };

		  //
		  // ON RESIZE FUNCTION - UPDATE THE CACHED POSITON VALUES
		  //

		  var initIndicators = function() {
			calcIndicatorInfo();
			// Bug fix - without timeout scroll top reports 0, even when it scrolls down the page to last page loaded position
			// http://stackoverflow.com/questions/16239520/chrome-remembers-scroll-position
			setTimeout(function(){
			  var st = $(document).scrollTop();
			  jQuery(indicators).each(function(){
				if(st<=this.absPos && st>=(-1*this.absBottomStop))
				  this.$indicator.removeClass("indicator--upcoming").removeClass("indicator--passed").addClass("indicator--active")
					  .css({ "top" : this.absPos });
				else if(st>=(-1*this.absBottomStop)) 
				  this.$indicator.removeClass("indicator--active").removeClass("indicator--upcoming").addClass("indicator--passed").css({ "top" : "" });
				else
				  this.$indicator.removeClass("indicator--active").removeClass("indicator--passed").addClass("indicator--upcoming").css({ "top" : "" });
				
				if(st>=this.viewableTopStop && st<=(this.viewableBottomStop))
				  this.$indicator.addClass("indicator--viewing");
				else
				  this.$indicator.removeClass("indicator--viewing");
			  });
			}, 0);
		  }

		  //
		  // SCROLL FUNCTION - UPDATE ALL OF THE INDICATORS
		  //

		  var adjustIndicators = function() {
			var st = jQuery(document).scrollTop();

			// The indicators that SHOULD be scrolling
			var anticipated = _.filter(indicators, function(o) { return (st<=o.absPos && st>=(-1*o.absBottomStop)) });

			// The $ elements that are indeed scrolling
			var active$ = jQuery(".indicator--active");

			// Anything in anticipated that isn't in active should be activated ...
			var needsActivation = _.filter(anticipated, function(o) { return !_.contains(active$, o.$indicator[0]); })

			// ... And anything thats in active that isn't in anticipated needs to be stopped. 
			var anticipatedEls = _.pluck(anticipated, "$indicator");
			var needsDeactivation = _.filter(active$, function(o) { 
			  return !_.find(anticipatedEls, function(e){ return e[0] == o }); 
			});

			// Do the Activation
			_.each(needsActivation, function(o) {
			  o.$indicator
				.removeClass("indicator--upcoming").removeClass("indicator--passed")
				.addClass("indicator--active")
				.css({ "top" : o.absPos })
			});

			_.each(needsDeactivation, function(i$){
			  var indicator = _.find(indicators, function(i) {
				return i.$indicator[0] == i$;
			  });
			  if(st>=indicator.absPos) {
				// Went off top. now passed. 
				indicator.$indicator.removeClass("indicator--active").addClass("indicator--passed").css({ "top" : "" });
			  }
			  else {
				// Went off bottom. now upcoming. 
				indicator.$indicator.removeClass("indicator--active").addClass("indicator--upcoming").css({ "top" : "" });
			  }
			});

			jQuery(indicators).each(function(){
			  if(st>=this.viewableTopStop && st<=(this.viewableBottomStop))
				this.$indicator.addClass("indicator--viewing");
			  else
				this.$indicator.removeClass("indicator--viewing");
			});

		  }

		  //
		  // BIND EVENTS
		  //

		  jQuery(document).scroll(function() {
			adjustIndicators();
		  });
		  jQuery(window).resize(function() {
			initIndicators();
			adjustIndicators();
		  });
		  
		  initIndicators();
		  adjustIndicators();
		  
		  jQuery(".indicator").click(function(){
			initIndicators();
			adjustIndicators();
		  })

		});
	</script>
  </body>
</html>