<!DOCTYPE html>
<html>
  <head>
    <title>Impruw Builder Layout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../css/flat-ui.css" rel="stylesheet" media="screen">
    <link href="../css/main.min.css" rel="stylesheet" media="screen">
	<link href="../css/builder.css" rel="stylesheet" media="screen">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="aj-imp-builder container">
		<div class="navbar navbar-default">
			<nav class="aj-imp-builder-top-nav row" role="navigation">
				<div class="aj-imp-builder-back col-sm-2">
					<p class="navbar-text">
						<a href="#"><span class="glyphicon glyphicon-arrow-left"></span> Back to Dashboard</a>
					</p>
				</div>
				<div class="aj-imp-page-layout col-sm-4 clearfix navbar-text">
					<div id="aj-imp-page-sel" class="dropdown">
						<a class="aj-imp-page-toggle" data-toggle="dropdown" href="#">Home Page <span class="glyphicon glyphicon-chevron-down"></span></a>
						<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
							<li role="presentation"><a role="menuitem" tabindex="-1" href="#">About Page</a></li>
							<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Gallery Page</a></li>
							<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Contact Us Page</a></li>
							<li role="presentation" class="aj-imp-add-page"><a role="menuitem" tabindex="-1" href="#"><span class="glyphicon glyphicon-plus-sign"></span> Add Page</a></li>
						</ul>
					</div>
					<div class="aj-imp-sub-bar-head">For Businesses that need to build their online presence</div>
				</div>
				<div class="aj-imp-builder-top-title col-sm-2">
					<p class="navbar-text">
						Editing the Home Page...
					</p>
				</div>
				<div class="aj-imp-builder-top-options col-sm-4">
					<form class="navbar-search">
						<select id="aj-imp-theme-sel">
							<option value="0">Business Theme</option>
							<option value="1">Travel Theme</option>
							<option value="2">Holiday Theme</option>
						</select>
						<div id="aj-imp-color-sel" class="dropdown"> 
							<a class="btn bt-default" data-toggle="dropdown" href="#"><span class="pull-left">Change Color</span><span class="caret"></span></a>
							<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1">
								<li role="presentation">
									<div class="aj-imp-color-box">
										<h6>Choose Color</h6>
										<ul class="clearfix">
											<li><a href="#" class="selected"><img src="images/color-blue.png" /></a></li>
											<li><a href="#"><img src="images/color-red.png" /></a></li>
											<li><a href="#"><img src="images/color-green.png" /></a></li>
										</ul>
									</div>
								</li>
							</ul>
						</div>
						<div id="aj-imp-settings-sel" class="dropdown"> 
							<a class="aj-imp-settings-toggle btn btn-default" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-cog"></span> <span class="caret"></span></a>
							<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1">
								<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Another action</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a></li>
							</ul>
						</div>
					</form>
				</div>
			</nav>
		</div>
		<div class="aj-imp-builder-area">
			<div class="aj-imp-theme-area">
				<h2 class="page-title">Choose a Theme for your Site</h2>
				<p class="desc">
					You can choose a theme to be applied across the pages of your site, you will be able to customise your theme logo, colours, layout, and components to suit your Site and preferences.
				</p>
				<div class="aj-imp-block-list">
					<ul>
						<li class="block">
							<img src="images/theme-1.jpg" />
							<h6 class="desc">Theme 1</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
						<li class="block">
							<img src="images/theme-2.jpg" />
							<h6 class="desc">Theme 2</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
						<li class="block">
							<img src="images/theme-3.jpg" />
							<h6 class="desc">Theme 3</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
						<li class="block">
							<img src="images/theme-4.jpg" />
							<h6 class="desc">Theme 4</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
						<li class="block">
							<img src="images/theme-5.jpg" />
							<h6 class="desc">Theme 5</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
						<li class="block">
							<img src="images/theme-6.jpg" />
							<h6 class="desc">Theme 6</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
						<li class="block">
							<img src="images/theme-7.jpg" />
							<h6 class="desc">Theme 7</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
						<li class="block">
							<img src="images/theme-8.jpg" />
							<h6 class="desc">Theme 8</h6>
							<div class="aj-imp-choose-btn">
								<a href="#" class="btn"><span class="glyphicon glyphicon-ok"></span>&nbsp;Choose</a>
							</div>
						</li>
					</ul>
					<div class="load-more">
						<a href="#" class="btn btn-wide"><span class="glyphicon glyphicon-repeat"></span>&nbsp;Load More</a>
					</div>
				</div>
			</div>
		</div>
	</div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-2.0.3.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-select.js"></script>
    <script src="js/bootstrap-switch.js"></script>
	<script>
		jQuery('.aj-imp-builder-top-nav select').selectpicker({style: 'btn-mini btn-default', menuStyle: 'dropdown'});
	</script>
	<script>
		// these are (ruh-roh) globals. You could wrap in an
		// immediately-Invoked Function Expression (IIFE) if you wanted to...
		var currentTallest = 0,
		    currentRowStart = 0,
		    rowDivs = new Array();
		
		function setConformingHeight(el, newHeight) {
			// set the height to something new, but remember the original height in case things change
			el.data("originalHeight", (el.data("originalHeight") == undefined) ? (el.height()) : (el.data("originalHeight")));
			el.height(newHeight);
		}
		
		function getOriginalHeight(el) {
			// if the height has changed, send the originalHeight
			return (el.data("originalHeight") == undefined) ? (el.height()) : (el.data("originalHeight"));
		}
		
		function columnConform() {
		
			// find the tallest DIV in the row, and set the heights of all of the DIVs to match it.
			jQuery('#aj-imp-builder-drag-drop > .row > div').each(function() {
			
				// "caching"
				var $el = jQuery(this);
				
				var topPosition = $el.position().top;
		
				if (currentRowStart != topPosition) {
		
					// we just came to a new row.  Set all the heights on the completed row
					for(currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) setConformingHeight(rowDivs[currentDiv], currentTallest);
		
					// set the variables for the new row
					rowDivs.length = 0; // empty the array
					currentRowStart = topPosition;
					currentTallest = getOriginalHeight($el);
					rowDivs.push($el);
		
				} else {
		
					// another div on the current row.  Add it to the list and check if it's taller
					rowDivs.push($el);
					currentTallest = (currentTallest < getOriginalHeight($el)) ? (getOriginalHeight($el)) : (currentTallest);
		
				}
				// do the last row
				for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) setConformingHeight(rowDivs[currentDiv], currentTallest);
		
			});
		}
		
		jQuery(window).resize(function() {
			columnConform();
		});
		
		// Dom Ready
		// You might also want to wait until window.onload if images are the things that
		// are unequalizing the blocks
		jQuery(window).load(function() {
			columnConform();
		});
		
	</script>
  </body>
</html>