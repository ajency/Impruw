<!DOCTYPE html>
<html>
<head>
  <title>base-settings-controller.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../", thisFile = "Applications/XAMPP/xamppfiles/htdocs/impruw/wp-content/themes/impruwclientparent/app/dev//controllers/base-settings-controller.coffee", defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>base-settings-controller.coffee</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">define</span> <span class="p">[</span><span class="s">&quot;marionette&quot;</span>
    <span class="s">&quot;app&quot;</span><span class="p">],</span> <span class="nf">(Marionette, App) -&gt;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<p>This is a special purpose controller for the setting module for all
elements inside site builder. This controller will act as tyhe centerpoint
for all action happening on setting region. the default region for this 
controller is settingsRegion. It will also hold @model = ElementModel() 
depending upon whichever element is loaded
It will listen to events coming from region's view instance and update @model 
accordingly.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">class</span> <span class="nx">BuilderSettingController</span> <span class="k">extends</span> <span class="nx">Marionette</span><span class="p">.</span><span class="nx">Controller</span>
        
        <span class="nv">constructor: </span><span class="nf">(options = {}) -&gt;</span>
          <span class="p">{</span><span class="nx">@model</span><span class="p">}</span> <span class="o">=</span> <span class="nx">options</span>
          <span class="k">if</span> <span class="o">not</span> <span class="nx">@model</span> 
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span> <span class="s">&quot;@model missing&quot;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<p>set default region as settingsRegion</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="vi">@region = </span><span class="nx">App</span><span class="p">.</span><span class="nx">getRegion</span> <span class="s">&#39;settingsRegion&#39;</span>  
          <span class="vi">@_instance_id = </span><span class="nx">_</span><span class="p">.</span><span class="nx">uniqueId</span> <span class="s">&quot;settingcontroller&quot;</span> 
          <span class="nx">App</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">execute</span> <span class="s">&quot;register:builder:instance&quot;</span><span class="p">,</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@_instance_id</span>
          <span class="k">super</span> <span class="nx">options</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<p>close the controller. 
unregister the controller instance from application object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nv">close: </span><span class="nf">(args...) -&gt;</span>
          <span class="k">delete</span> <span class="nx">@region</span>
          <span class="k">delete</span> <span class="nx">@options</span>
          <span class="nx">App</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">execute</span> <span class="s">&quot;unregister:builder:instance&quot;</span><span class="p">,</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@_instance_id</span>
          <span class="k">super</span> <span class="nx">args</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<p>listen to onClose event. 
this event will be triggered when the element setting popup is closed.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">onClose</span><span class="o">:</span><span class="nf">-&gt;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>return if the model is not changed. @use: model.hasChanged() function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">return</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">@model</span><span class="p">.</span><span class="nx">hasChanged</span><span class="p">()</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>if the model is changed . save the updated model to server.
null because we have already set the new values for model</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">@model</span><span class="p">.</span><span class="nx">save</span> <span class="kc">null</span><span class="p">,</span> <span class="nv">wait: </span><span class="kc">true</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<p>listen to view events. these will be generic model events which will be same accross 
all elements. If custom model events are required overwrite this function with call to super</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">_bindModelEvents</span><span class="o">:</span><span class="nf">(view)-&gt;</span>
          <span class="nx">@listenTo</span> <span class="nx">view</span><span class="p">,</span> <span class="s">&quot;element:draggable:changed&quot;</span><span class="p">,</span> <span class="nx">@updateModel</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<p>this function will update the model with the passed property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">updateModel</span><span class="o">:</span><span class="nf">(property, value)-&gt;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<p>set the value for the passed property. for new porperty a key will be created
this will trigger corresponding "change:property" event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">@model</span><span class="p">.</span><span class="nx">set</span> <span class="nx">property</span><span class="p">,</span><span class="nx">value</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
